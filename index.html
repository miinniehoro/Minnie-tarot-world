<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å 4 ‡πÉ‡∏ö</title>
    
    <!-- ‡∏ü‡∏≠‡∏ô‡∏ï‡πå Sarabun ‡πÅ‡∏•‡∏∞ html2canvas -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Sarabun', sans-serif !important;
            background-color: #F6C6C7 !important; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ä‡∏°‡∏û‡∏π */
            color: #ffffff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏π‡∏õ‡πÇ‡∏•‡πÇ‡∏Å‡πâ PNG */
        .main-logo {
            width: 90%;
            max-width: 400px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡∏ä‡∏≠‡∏ö */
            height: auto;
            margin: 10px auto 0;
            display: block;
        }

        /* ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà */
        #selection-screen { width: 100%; max-width: 600px; text-align: center; padding: 0 10px 10px; }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≠‡∏á‡πÑ‡∏û‡πà‡πÅ‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô (60 ‡πÉ‡∏ö) */
        .deck-container { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            padding: 10px;
            margin-top: 5px;
        }

        .card-back {
            width: 45px; 
            height: 75px;
            background: linear-gradient(135deg, #283593, #3f51b5);
            border: 1.5px solid #ffd700;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: -2px 2px 5px rgba(0,0,0,0.3);
            margin: 2px -12px; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏û‡πà‡πÄ‡∏Å‡∏¢‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô */
            transition: 0.2s;
            position: relative;
        }

        .card-back:hover {
            transform: translateY(-15px) rotate(2deg) scale(1.15);
            z-index: 100;
            background: #3949ab;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        
        .card-back.selected { visibility: hidden; opacity: 0; }

        /* ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏µ‡∏î‡∏≥ */
        #counter { 
            color: #000000; 
            font-size: 18px; 
            font-weight: 700; 
            margin: 5px 0 15px; 
        }

        /* ‡∏´‡∏ô‡πâ‡∏≤ Loading */
        #loading-screen { display: none; text-align: center; margin-top: 80px; color: #000; }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #ad1457;
            border-radius: 50%;
            width: 50px; height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô 4 ‡πÉ‡∏ö) */
        #result-screen { display: none; width: 100%; max-width: 800px; padding: 10px; }
        #captureArea {
            background-color: #1a237e; 
            padding: 15px;
            border-radius: 12px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            width: 100%;
        }
        .summary-card {
            background: white;
            padding: 5px;
            border-radius: 6px;
            color: #333;
            text-align: center;
        }
        .summary-card .pos-top { font-size: 9px; font-weight: bold; color: #b22222; margin-bottom: 3px; }
        .summary-card img { width: 100%; border-radius: 4px; aspect-ratio: 2/3.5; object-fit: cover; }
        .summary-card h3 { font-size: 10px; margin: 4px 0 2px; color: #1a237e; white-space: nowrap; overflow: hidden; }

        .btn-group { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
        button {
            padding: 12px 25px; border-radius: 30px; border: none;
            font-family: 'Sarabun'; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .btn-cap { background: #ad1457; color: white; }
        .btn-new { background: #ffd700; color: #1a237e; }

        /* ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
        #detailArea { width: 100%; max-width: 600px; margin: 0 auto; padding-bottom: 120px; }
        .detail-row {
            background-color: #e3f2fd;
            color: #333;
            margin-bottom: 30px;
            border-radius: 0 0 10px 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        }
        .detail-header {
            background-color: #212121;
            color: #ffd700;
            padding: 12px;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
        }
        .detail-body { display: flex; padding: 20px; gap: 20px; align-items: flex-start; }
        .detail-img { width: 100px; border-radius: 5px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2); flex-shrink: 0; }
        .detail-text { flex: 1; }
        .detail-text h4 { margin: 0 0 8px; color: #1a237e; font-size: 18px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
        .detail-text p { margin: 0; line-height: 1.6; font-size: 15px; color: #333; }

        .bottom-nav {
            position: fixed; bottom: 0; width: 100%;
            background: #ffffff; display: flex; justify-content: space-around;
            padding: 15px 0; border-top: 2px solid #ffd700; z-index: 100;
        }
        .nav-link { color: #1a237e; text-decoration: none; font-size: 14px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <!-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ H1 ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û PNG ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤ -->
    <img src="logo.png" alt="‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å" class="main-logo">

    <div id="selection-screen">
        <p style="font-weight: 300; color: #000; margin-bottom: 5px;">‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏¥‡∏ï‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏ô‡∏¥‡πà‡∏á‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà 4 ‡πÉ‡∏ö</p>
        <h2 id="counter">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: 0 / 4</h2>
        <div class="deck-container" id="deck"></div>
    </div>

    <div id="loading-screen">
        <div class="spinner"></div>
        <p>‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢... ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
    </div>

    <div id="result-screen">
        <div class="btn-group">
            <button class="btn-new" onclick="location.reload()">‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            <button class="btn-cap" onclick="captureImageJPG()">üì∏ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (.jpg)</button>
        </div>

        <div id="captureArea"></div>

        <h2 style="text-align: center; margin: 40px 0 20px; color: #212121; font-size: 20px;">üìñ ‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ó‡∏µ‡∏•‡∏∞‡πÉ‡∏ö</h2>
        <div id="detailArea"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-link" onclick="location.reload()">üÉè ‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ</div>
        <div class="nav-link" onclick="shareURL()">üì¢ ‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ</div>
        <div class="nav-link">üïâÔ∏è ‡∏°‡∏π‡πÄ‡∏ï‡∏•‡∏π</div>
    </nav>

<script>
    const posTitles = ["‡πÉ‡∏ö‡∏ó‡∏µ‡πà 1 : ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì", "‡πÉ‡∏ö‡∏ó‡∏µ‡πà 2 : ‡πÄ‡∏Ç‡∏≤‡∏Ñ‡∏ô‡∏ô‡∏±‡πâ‡∏ô", "‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3 : ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô", "‡πÉ‡∏ö‡∏ó‡∏µ‡πà 4 : ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï"];
    let selectedCount = 0;

    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏û‡πà (‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 78 ‡πÉ‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö)
    const tarotDeck = [
        /* Major Arcana */
        {n:"The Fool",i:"00-TheFool.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏™‡∏ã‡∏∑‡πà‡∏≠ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô"},
        {n:"The Magician",i:"01-TheMagician.jpg",m:"‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå‡πÅ‡∏£‡∏á ‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á"},
        {n:"The High Priestess",i:"02-TheHighPriestess.jpg",m:"‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏ï‡πà‡∏≤‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"},
        {n:"The Empress",i:"03-TheEmpress.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô ‡πÄ‡∏≠‡∏≤‡πÉ‡∏à‡πÉ‡∏™‡πà ‡∏°‡∏µ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß"},
        {n:"The Emperor",i:"04-TheEmperor.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏π‡πÅ‡∏•"},
        {n:"The Hierophant",i:"05-TheHierophant.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô"},
        {n:"The Lovers",i:"06-TheLovers.jpg",m:"‡∏£‡∏±‡∏Å‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏™‡∏π‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏¢‡πå"},
        {n:"The Chariot",i:"07-TheChariot.jpg",m:"‡∏£‡∏±‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÅ‡∏°‡πâ‡∏≠‡∏∏‡∏õ‡∏™‡∏£‡∏£‡∏Ñ ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ"},
        {n:"Strength",i:"08-Strength.jpg",m:"‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏î‡∏ó‡∏ô ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå"},
        {n:"The Hermit",i:"09-TheHermit.jpg",m:"‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô"},
        {n:"Wheel of Fortune",i:"10-WheelOfFortune.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤"},
        {n:"Justice",i:"11-Justice.jpg",m:"‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô"},
        {n:"The Hanged Man",i:"12-TheHangedMan.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Ñ‡∏≠‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏™‡∏•‡∏∞‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á"},
        {n:"Death",i:"13-Death.jpg",m:"‡∏à‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤"},
        {n:"Temperance",i:"14-Temperance.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ô‡∏µ‡∏õ‡∏£‡∏∞‡∏ô‡∏≠‡∏° ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏™‡∏°‡∏î‡∏∏‡∏•"},
        {n:"The Devil",i:"15-TheDevil.jpg",m:"‡∏ú‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏•‡∏∂‡∏Å ‡∏´‡∏•‡∏á‡πÉ‡∏´‡∏• ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏©"},
        {n:"The Tower",i:"16-TheTower.jpg",m:"‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏Å‡∏™‡∏±‡πà‡∏ô‡∏Ñ‡∏•‡∏≠‡∏ô"},
        {n:"The Star",i:"17-TheStar.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á ‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏´‡∏±‡∏ß‡πÉ‡∏à ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏Ñ‡πà‡∏≠‡∏¢‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô"},
        {n:"The Moon",i:"18-TheMoon.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏á‡πÄ‡∏• ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡πÑ‡∏õ‡πÄ‡∏≠‡∏á"},
        {n:"The Sun",i:"19-TheSun.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏™‡∏î‡πÉ‡∏™ ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç"},
        {n:"Judgement",i:"20-Judgement.jpg",m:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏≠‡∏î‡∏µ‡∏ï‡∏≠‡∏≤‡∏à‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤"},
        {n:"The World",i:"21-TheWorld.jpg",m:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏•‡∏á‡∏ï‡∏±‡∏ß ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÅ‡∏•‡∏∞‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á"},
        // ‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Wands, Cups, Swords, Pentacles) ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
    ];

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≠‡∏á‡πÑ‡∏û‡πà 60 ‡πÉ‡∏ö
    function createDeck() {
        const deckDiv = document.getElementById("deck");
        for(let i=0; i<60; i++) {
            const card = document.createElement("div");
            card.className = "card-back";
            card.innerHTML = "üåô";
            card.onclick = function() { selectCard(this); };
            deckDiv.appendChild(card);
        }
    }

    function selectCard(el) {
        if (el.classList.contains("selected")) return;
        el.classList.add("selected");
        selectedCount++;
        document.getElementById("counter").innerText = `‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: ${selectedCount} / 4`;
        if (selectedCount === 4) {
            document.getElementById("selection-screen").style.display = "none";
            document.querySelector(".main-logo").style.display = "none"; // ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î
            document.getElementById("loading-screen").style.display = "block";
            setTimeout(showResults, 5000);
        }
    }

    function showResults() {
        document.getElementById("loading-screen").style.display = "none";
        document.getElementById("result-screen").style.display = "block";
        const summaryBox = document.getElementById("captureArea");
        const detailBox = document.getElementById("detailArea");
        const picks = [...tarotDeck].sort(() => 0.5 - Math.random()).slice(0, 4);

        picks.forEach((c, i) => {
            summaryBox.innerHTML += `
                <div class="summary-card">
                    <div class="pos-top">‡πÉ‡∏ö‡∏ó‡∏µ‡πà ${i+1}</div>
                    <img src="${c.i}" onerror="this.src='https://placehold.co/100x170?text=Card';">
                    <h3>${c.n}</h3>
                </div>
            `;
            detailBox.innerHTML += `
                <div class="detail-row">
                    <div class="detail-header">‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà ${i+1} : ${posTitles[i]}</div>
                    <div class="detail-body">
                        <img src="${c.i}" class="detail-img" onerror="this.src='https://placehold.co/100x170?text=Card';">
                        <div class="detail-text">
                            <h4>${c.n}</h4>
                            <p>${c.m}</p>
                        </div>
                    </div>
                </div>
            `;
        });
    }

    async function shareURL() {
        if (navigator.share) {
            try {
                await navigator.share({
                    title: '‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å 4 ‡πÉ‡∏ö',
                    text: '‡∏•‡∏≠‡∏á‡∏°‡∏≤‡πÄ‡∏ä‡πá‡∏Å‡∏î‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å 4 ‡πÉ‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡∏™‡∏¥!',
                    url: window.location.href,
                });
            } catch (err) { console.log("Sharing failed", err); }
        } else {
            const dummy = document.createElement('input');
            document.body.appendChild(dummy);
            dummy.value = window.location.href;
            dummy.select();
            document.execCommand('copy');
            document.body.removeChild(dummy);
            alert("‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
        }
    }

    async function captureImageJPG() {
        const area = document.getElementById("captureArea");
        const canvas = await html2canvas(area, { 
            backgroundColor: "#1a237e", 
            scale: 2 
        });
        const imageJPG = canvas.toDataURL("image/jpeg", 0.9);
        const link = document.createElement("a");
        link.download = "tarot-reading.jpg";
        link.href = imageJPG;
        link.click();
    }

    createDeck();
</script>
</body>
</html>
